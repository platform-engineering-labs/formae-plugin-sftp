/*
 * Basic SFTP Example
 *
 * This example shows how to manage files on an SFTP server.
 * Run with: formae apply --mode reconcile main.pkl
 */
amends "@formae/forma.pkl"

import "@formae/formae.pkl"
import "@sftp/sftp.pkl"

forma {
  new formae.Stack {
    label = "local-test"
    description = "Local testing stack"
  }

  new formae.Target {
    label = "sftp-local"
    config = new sftp.Config {
      url = "sftp://localhost:2222"
    }
  }

  new sftp.File {
    label = "hello"
    path = "/upload/hello.txt"
    content = "Hello from formae!"
    permissions = "0644"
  }
}
